<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email</title>
    <style>
      :root {
        --bg: #ffffff;
        --surface: #ffffff;
        --text: #1a1a1a;
        --muted: #334155;
        --primary: #1d4ed8;
        --accent: #f97316;
        --role-bg: rgba(249,115,22,0.08);
        --role-color: #ea580c;
        --shadow: 0 12px 26px rgba(29,78,216,0.10);
        --card-surface: #ffffff;
        --card-border: rgba(15,23,42,0.08);
        --card-text: var(--text);
        --card-muted: #475569;
        --border: rgba(15, 23, 42, 0.12);
      }

      [data-theme="dark"] {
        --bg: #071025;
        --surface: #0b1220;
        --text: #e6eef8;
        --muted: #cbd5e1;
        --primary: #60a5fa;
        --accent: #fb923c;
        --role-bg: rgba(249,115,22,0.12);
        --role-color: #ffb86b;
        --shadow: 0 18px 46px rgba(2,6,23,0.55);
        --card-surface: #ffffff;
        --card-border: rgba(148,163,184,0.18);
        --card-text: var(--text);
        --card-muted: var(--muted);
        --border: rgba(148, 163, 184, 0.18);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: 'Canaro', 'Arial', sans-serif;
        color: var(--text);
        background:
          radial-gradient(1200px 600px at 80% -10%, rgba(29,78,216,0.06), transparent 52%),
          radial-gradient(900px 500px at -10% 20%, rgba(249,115,22,0.025), transparent 56%),
          var(--bg);
      }

      body::before,
      body::after {
        content: "";
        position: fixed;
        inset: auto;
        width: 520px;
        height: 520px;
        border-radius: 999px;
        filter: blur(42px);
        opacity: 0.65;
        pointer-events: none;
        z-index: -1;
      }
      body::before {
        top: -180px;
        right: -160px;
        background: radial-gradient(circle at 30% 30%, rgba(29,78,216,0.18), transparent 62%);
      }
      body::after {
        bottom: -220px;
        left: -200px;
        background: radial-gradient(circle at 40% 40%, rgba(249,115,22,0.10), transparent 64%);
      }

      [data-theme="dark"] body {
        background:
          radial-gradient(1200px 600px at 80% -10%, rgba(96,165,250,0.10), transparent 52%),
          radial-gradient(900px 500px at -10% 20%, rgba(251,146,60,0.06), transparent 56%),
          var(--bg);
      }

      [data-theme="dark"] body::before {
        opacity: 0.55;
        background: radial-gradient(circle at 30% 30%, rgba(96,165,250,0.22), transparent 62%);
      }
      [data-theme="dark"] body::after {
        opacity: 0.5;
        background: radial-gradient(circle at 40% 40%, rgba(251,146,60,0.14), transparent 64%);
      }

      a { color: inherit; }

      .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 28px 18px 46px;
      }

      .page-title {
        margin: 0 0 4px;
        font-size: 14px;
        font-weight: 800;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: rgba(71, 85, 105, 0.9);
      }

      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 18px;
      }

      /* Header (reprend le header de index.html) */
      .site-header {
        position: sticky;
        top: 0;
        z-index: 50;
        backdrop-filter: blur(12px);
        background: rgba(255, 255, 255, 0.65);
        border-bottom: 1px solid var(--border);
      }
      [data-theme="dark"] .site-header {
        background: rgba(7, 16, 37, 0.55);
      }
      .site-header .container {
        max-width: 1100px;
        padding: 14px 18px;
      }
      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }
      .site-header .brand {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-weight: 800;
        letter-spacing: 0.2px;
        color: var(--text);
        text-decoration: none;
      }
      .site-header .brand img {
        width: 56px;
        height: 56px;
        object-fit: contain;
      }
      .nav-controls {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .nav-icons {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      /* language toggle button (same behavior as index) */
      .language-toggle-wrapper {
        position: relative;
        margin-right: 8px;
      }
      .language-toggle {
        appearance: none;
        border: 1px solid var(--border);
        background: rgba(255,255,255,0.55);
        color: var(--text);
        width: 42px;
        height: 42px;
        border-radius: 14px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, background-color 200ms ease;
      }
      [data-theme="dark"] .language-toggle {
        background: rgba(15, 23, 42, 0.55);
      }
      .language-toggle:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }
      .language-toggle:focus-visible { outline: 3px solid rgba(29,78,216,0.12); outline-offset: 4px; }
      .language-toggle img { width: 18px; height: 18px; display: block; }

      .language-toggle img {
        filter: brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%);
      }
      [data-theme="dark"] .language-toggle img {
        filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);
      }

      .language-menu {
        position: absolute;
        top: calc(100% + 8px);
        right: 0;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        min-width: 140px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-8px);
        transition: opacity 200ms ease, transform 200ms ease, visibility 200ms ease;
        z-index: 1000;
        overflow: hidden;
      }

      [data-theme="dark"] .language-menu {
        background: #0f172a;
        border-color: rgba(96, 165, 250, 0.3);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
      }

      [data-theme="dark"] .language-option:hover { background: rgba(96, 165, 250, 0.15); color: var(--primary); }
      [data-theme="dark"] .language-option.is-active { background: rgba(96, 165, 250, 0.2); color: var(--primary); }
      .language-menu.is-open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
      .language-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 16px;
        cursor: pointer;
        transition: background 150ms ease, color 150ms ease;
        border: 0;
        background: transparent;
        width: 100%;
        text-align: left;
        font-family: inherit;
        font-size: 0.95rem;
        color: var(--text);
      }
      .language-option:hover { background: rgba(29, 78, 216, 0.08); color: var(--primary); }
      .language-option.is-active { background: rgba(29, 78, 216, 0.12); color: var(--primary); font-weight: 600; }
      .language-flag {
        width: 20px;
        height: 15px;
        border-radius: 2px;
        flex-shrink: 0;
        object-fit: cover;
        display: block;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 42px;
        padding: 0 14px;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: rgba(255,255,255,0.55);
        color: var(--text);
        text-decoration: none;
        font-weight: 600;
        transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, background-color 200ms ease;
      }
      [data-theme="dark"] .back-btn { background: rgba(15, 23, 42, 0.55); }
      .back-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
      .theme-toggle {
        appearance: none;
        border: 1px solid var(--border);
        background: rgba(255,255,255,0.55);
        color: var(--text);
        width: 42px;
        height: 42px;
        border-radius: 14px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, background-color 200ms ease;
      }
      [data-theme="dark"] .theme-toggle {
        background: rgba(15, 23, 42, 0.55);
      }
      .theme-toggle:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }

      @media (max-width: 900px) {
        .site-header .container { padding: 12px 16px; }
        .site-header .brand img { width: 55px; height: 55px; }
      }

      .brand {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-weight: 800;
        letter-spacing: -0.02em;
        text-decoration: none;
      }
      .brand-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: linear-gradient(135deg, var(--primary), var(--accent));
        box-shadow: 0 12px 26px rgba(29, 78, 216, 0.18);
      }

      .btn {
        appearance: none;
        border: 0;
        cursor: pointer;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 999px;
        font-weight: 700;
        font-family: inherit;
        transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, background-color 200ms ease, color 200ms ease;
      }
      .btn svg { width: 18px; height: 18px; }
      .btn:active { transform: translateY(1px); }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary), rgba(29, 78, 216, 0.86));
        color: #fff;
        box-shadow: 0 14px 34px rgba(29, 78, 216, 0.18);
      }
      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 40px rgba(29, 78, 216, 0.22);
      }

      .btn-ghost {
        background: transparent;
        color: var(--text);
        border: 1px solid var(--border);
      }
      .btn-ghost:hover { transform: translateY(-1px); box-shadow: var(--shadow); }

      #copyEmailBtn.btn-ghost {
        background: linear-gradient(135deg, var(--accent), rgba(249, 115, 22, 0.86));
        color: #ffffff;
        border: 0;
        box-shadow: 0 14px 34px rgba(249, 115, 22, 0.18);
      }
      #copyEmailBtn.btn-ghost:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 40px rgba(249, 115, 22, 0.22);
      }

      .hero {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 18px;
        align-items: stretch;
      }

      .card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 18px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }

      [data-theme="dark"] .card {
        background: rgba(11, 18, 32, 0.88);
        border-color: rgba(148, 163, 184, 0.18);
      }

      .card.card-accent {
        position: relative;
        overflow: hidden;
      }
      .card.card-accent::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(900px 380px at 20% 0%, rgba(29, 78, 216, 0.12), transparent 55%),
                    radial-gradient(700px 340px at 90% 10%, rgba(249, 115, 22, 0.10), transparent 55%);
        pointer-events: none;
      }
      .card.card-accent > .card-body { position: relative; }

      .card-body { padding: 18px; }

      h1 {
        margin: 0 0 8px;
        font-size: 30px;
        letter-spacing: -0.02em;
      }
      .lead { margin: 0; color: var(--muted); line-height: 1.55; }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.6);
        color: var(--muted);
        font-weight: 700;
        margin-bottom: 12px;
      }

      .badge {
        border-color: rgba(29, 78, 216, 0.25);
        background: rgba(29, 78, 216, 0.08);
        color: var(--primary);
      }

      [data-theme="dark"] .badge {
        border-color: rgba(96, 165, 250, 0.35);
        background: rgba(96, 165, 250, 0.14);
        color: var(--primary);
      }

      .badge svg { width: 16px; height: 16px; }

      form { margin-top: 14px; }

      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      label { display: block; font-weight: 700; margin: 0 0 6px; }

      .field {
        position: relative;
      }
      .field .field-icon {
        position: absolute;
        left: 12px;
        top: 40px;
        width: 18px;
        height: 18px;
        color: rgba(71, 85, 105, 0.9);
        pointer-events: none;
      }

      [data-theme="dark"] .field .field-icon {
        color: rgba(203, 213, 225, 0.85);
      }

      input, textarea {
        width: 100%;
        padding: 12px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.88);
        color: var(--text);
        outline: none;
        font-family: inherit;
        transition: box-shadow 200ms ease, border-color 200ms ease, transform 200ms ease;
      }

      input::placeholder,
      textarea::placeholder {
        font-family: inherit;
      }

      [data-theme="dark"] input,
      [data-theme="dark"] textarea {
        background: rgba(15, 23, 42, 0.55);
        border-color: rgba(148, 163, 184, 0.22);
        color: var(--text);
      }

      [data-theme="dark"] input::placeholder,
      [data-theme="dark"] textarea::placeholder {
        color: rgba(203, 213, 225, 0.75);
      }

      .field input,
      .field textarea {
        padding-left: 40px;
      }

      .field textarea + .field-icon,
      .field textarea ~ .field-icon {
        top: 40px;
      }

      textarea { resize: vertical; min-height: 120px; }
      input:focus, textarea:focus {
        border-color: rgba(29, 78, 216, 0.55);
        box-shadow: 0 0 0 4px rgba(29, 78, 216, 0.12);
      }

      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 12px;
      }

      .side {
        display: grid;
        gap: 12px;
      }

      .info-row {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
      }
      .info-row strong { display: block; }
      .small { font-size: 13px; color: var(--muted); line-height: 1.5; }

      .info-row strong[data-i18n="email.quick"],
      .card-body strong[data-i18n="email.tipTitle"] {
        color: var(--accent);
      }

      .mono {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 13px;
      }

      .email-pill {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px dashed rgba(29, 78, 216, 0.35);
        background: rgba(29, 78, 216, 0.06);
        margin-top: 10px;
      }

      [data-theme="dark"] .email-pill {
        border-color: rgba(96, 165, 250, 0.35);
        background: rgba(96, 165, 250, 0.10);
      }
      .email-pill svg { width: 18px; height: 18px; color: var(--primary); }

      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%) translateY(20px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 220ms ease, transform 220ms cubic-bezier(.2,.9,.2,1);
        background: rgba(15, 23, 42, 0.9);
        color: #fff;
        padding: 10px 12px;
        border-radius: 999px;
        font-weight: 700;
      }
      .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

      @media (max-width: 820px) {
        .hero { grid-template-columns: 1fr; }
        .grid { grid-template-columns: 1fr; }
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <nav class="nav">
          <a class="brand" href="index.html" aria-label="Accueil">
            <img src="img/logo.png" alt="Logo" onerror="this.style.opacity=0.6;this.style.filter='grayscale(1)';" />
          </a>

          <div class="nav-controls">
            <div class="nav-icons">
              <div class="language-toggle-wrapper">
                <button class="language-toggle" id="languageToggle" aria-label="Changer de langue" title="Choisir la langue" aria-expanded="false" aria-haspopup="true">
                  <img src="img/translate.svg" alt="Traduction" width="18" height="18" />
                </button>
                <div class="language-menu" id="languageMenu" role="menu">
                  <button class="language-option" role="menuitem" data-lang="fr" id="langOptionFr">
                    <img src="img/france.svg" alt="Français" class="language-flag" />
                    <span>Français</span>
                  </button>
                  <button class="language-option" role="menuitem" data-lang="en" id="langOptionEn">
                    <img src="img/us.svg" alt="English" class="language-flag" />
                    <span>English</span>
                  </button>
                </div>
              </div>

              <button class="theme-toggle" id="themeToggle" aria-label="Activer le mode sombre" aria-pressed="false" title="Basculer thème">
                <span id="themeIcon" aria-hidden="true"></span>
              </button>

              <a class="back-btn" href="index.html" data-i18n="email.back">Retour</a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">

      <div class="hero">
        <div class="card card-accent">
          <div class="card-body">
            <div class="badge">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              <span data-i18n="email.badge">Contact par email</span>
            </div>
            <h1 data-i18n="email.title">Envoyer un message</h1>
            <p class="lead" data-i18n="email.lead">Remplis le formulaire, puis clique sur <strong>Ouvrir mon mail</strong> pour préparer automatiquement le message dans ton application Email.</p>

            <form id="emailForm">
              <div class="grid">
                <div class="field">
                  <label for="name" data-i18n="email.name">Nom</label>
                  <input id="name" name="name" type="text" autocomplete="name" placeholder="Ton nom" data-i18n-placeholder="email.name.placeholder" />
                  <svg class="field-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                </div>

                <div class="field">
                  <label for="from" data-i18n="email.from">Ton email</label>
                  <input id="from" name="from" type="email" autocomplete="email" placeholder="ex: toi@email.com" data-i18n-placeholder="email.from.placeholder" />
                  <svg class="field-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                  </svg>
                </div>

                <div class="field" style="grid-column: 1 / -1;">
                  <label for="subject" data-i18n="email.subject">Sujet</label>
                  <input id="subject" name="subject" type="text" placeholder="Sujet du message" value="Contact depuis le portfolio" data-i18n-placeholder="email.subject.placeholder" />
                  <svg class="field-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M21 15a4 4 0 0 1-4 4H7l-4 4V5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"></path>
                  </svg>
                </div>

                <div class="field" style="grid-column: 1 / -1;">
                  <label for="message" data-i18n="email.message">Message</label>
                  <textarea id="message" name="message" placeholder="Écris ton message..." data-i18n-placeholder="email.message.placeholder"></textarea>
                  <svg class="field-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M21 15a4 4 0 0 1-4 4H7l-4 4V5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"></path>
                    <path d="M8 9h8"></path>
                    <path d="M8 13h6"></path>
                  </svg>
                </div>
              </div>

              <div class="actions">
                <button class="btn btn-primary" type="submit">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                  </svg>
                  <span data-i18n="email.open">Ouvrir mon mail</span>
                </button>

                <button class="btn btn-ghost" type="button" id="copyEmailBtn">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  <span data-i18n="email.copy">Copier l'email</span>
                </button>
              </div>
            </form>
          </div>
        </div>

        <div class="side">
          <div class="card">
            <div class="card-body">
              <div class="info-row">
                <div>
                  <strong data-i18n="email.quick">Email</strong>
                  <div class="email-pill">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                      <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <div class="mono" id="toEmail">mamachabifahim@gmail.com</div>
                  </div>
                  <div class="small" data-i18n="email.quick.desc">Réponse rapide, envoie ton message ici.</div>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <strong data-i18n="email.tipTitle">Astuce</strong>
              <p class="small" style="margin: 8px 0 0;">
                <span data-i18n="email.tipText">Si ton navigateur bloque l'ouverture automatique, utilise <strong>Copier l'email</strong> et envoie le message depuis Gmail / Outlook.</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <script>
      (function(){
        var to = 'mamachabifahim@gmail.com';
        var form = document.getElementById('emailForm');
        var copyBtn = document.getElementById('copyEmailBtn');
        var toast = document.getElementById('toast');

        var translations = {
          fr: {
            'email.badge': 'Contact par email',
            'email.title': 'Envoyer un message',
            'email.lead': "Remplis le formulaire, puis clique sur Ouvrir mon mail pour préparer automatiquement le message dans ton application Email.",
            'email.name': 'Nom',
            'email.name.placeholder': 'Ton nom',
            'email.from': 'Ton email',
            'email.from.placeholder': 'ex: toi@email.com',
            'email.subject': 'Sujet',
            'email.subject.placeholder': 'Sujet du message',
            'email.message': 'Message',
            'email.message.placeholder': 'Écris ton message...',
            'email.open': 'Ouvrir Gmail',
            'email.copy': "Copier l'email",
            'email.tipTitle': 'Astuce',
            'email.tipText': "Si ton navigateur bloque l'ouverture automatique, utilise Copier l'email et envoie le message depuis Gmail / Outlook.",
            'email.quick': 'Email',
            'email.quick.desc': 'Réponse rapide, envoie ton message ici.',
            'email.back': 'Retour',
            'lang.change': 'Changer de langue',
            'lang.toggle': 'Choisir la langue',
            'theme.dark': 'Activer le mode sombre',
            'theme.light': 'Activer le mode clair',
            'theme.toggle': 'Basculer thème',
            'toast.copied': 'Email copié',
            'toast.copyFail': 'Impossible de copier',
            'toast.noClipboard': 'Copie non supportée'
          },
          en: {
            'email.badge': 'Contact by email',
            'email.title': 'Send a message',
            'email.lead': 'Fill the form, then click Open my email to prepare the message in your email app.',
            'email.name': 'Name',
            'email.name.placeholder': 'Your name',
            'email.from': 'Your email',
            'email.from.placeholder': 'e.g. you@email.com',
            'email.subject': 'Subject',
            'email.subject.placeholder': 'Message subject',
            'email.message': 'Message',
            'email.message.placeholder': 'Write your message...',
            'email.open': 'Open Gmail',
            'email.copy': 'Copy email',
            'email.tipTitle': 'Tip',
            'email.tipText': 'If your browser blocks opening, use Copy email and send via Gmail / Outlook.',
            'email.quick': 'Email',
            'email.quick.desc': 'Quick reply, send your message here.',
            'email.back': 'Back',
            'lang.change': 'Change language',
            'lang.toggle': 'Choose language',
            'theme.dark': 'Enable dark mode',
            'theme.light': 'Enable light mode',
            'theme.toggle': 'Toggle theme',
            'toast.copied': 'Email copied',
            'toast.copyFail': 'Copy failed',
            'toast.noClipboard': 'Clipboard not supported'
          }
        };

        function applyTranslations(lang) {
          var elements = document.querySelectorAll('[data-i18n]');
          elements.forEach(function(el){
            var key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
              el.innerHTML = translations[lang][key];
            }
          });
          var placeholders = document.querySelectorAll('[data-i18n-placeholder]');
          placeholders.forEach(function(el){
            var key = el.getAttribute('data-i18n-placeholder');
            if (translations[lang] && translations[lang][key]) {
              el.setAttribute('placeholder', translations[lang][key]);
            }
          });
          document.documentElement.lang = lang;
          try { localStorage.setItem('site-language', lang); } catch (e) {}
        }

        // Theme initialization & toggle (Feather Icons: light => moon, dark => sun)
        (function () {
          var root = document.documentElement;
          var toggle = document.getElementById('themeToggle');
          var icon = document.getElementById('themeIcon');

          function getInitialTheme() {
            try {
              var stored = localStorage.getItem('site-theme');
              if (stored === 'dark' || stored === 'light') return stored;
            } catch (e) {}
            return (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light';
          }

          function renderMoon() {
            icon = document.getElementById('themeIcon');
            if (!icon || !window.feather || !feather.icons.moon) return;
            icon.innerHTML = feather.icons.moon.toSvg({ width: 18, height: 18 });
          }
          function renderSun() {
            icon = document.getElementById('themeIcon');
            if (!icon || !window.feather || !feather.icons.sun) return;
            icon.innerHTML = feather.icons.sun.toSvg({ width: 18, height: 18 });
          }

          function applyTheme(theme) {
            if (theme === 'dark') {
              root.setAttribute('data-theme', 'dark');
              if (toggle) {
                toggle.setAttribute('aria-pressed', 'true');
                toggle.setAttribute('aria-label', translations[currentLang] ? translations[currentLang]['theme.light'] : 'Activer le mode clair');
              }
              renderSun();
              try { localStorage.setItem('site-theme', 'dark'); } catch (e) {}
            } else {
              root.removeAttribute('data-theme');
              if (toggle) {
                toggle.setAttribute('aria-pressed', 'false');
                toggle.setAttribute('aria-label', translations[currentLang] ? translations[currentLang]['theme.dark'] : 'Activer le mode sombre');
              }
              renderMoon();
              try { localStorage.setItem('site-theme', 'light'); } catch (e) {}
            }
          }

          function ensureFeatherAndInit(theme) {
            if (window.feather && feather.icons) {
              applyTheme(theme);
            } else {
              var tries = 0;
              var t = setInterval(function () {
                if (window.feather && feather.icons) {
                  clearInterval(t);
                  applyTheme(theme);
                } else if (++tries > 12) {
                  clearInterval(t);
                  applyTheme(theme);
                }
              }, 100);
            }
          }

          var current = getInitialTheme();
          ensureFeatherAndInit(current);

          if (toggle) {
            toggle.setAttribute('aria-pressed', current === 'dark' ? 'true' : 'false');
            toggle.addEventListener('click', function () {
              var isDark = root.getAttribute('data-theme') === 'dark';
              applyTheme(isDark ? 'light' : 'dark');
            });
          }
        })();

        // Language dropdown (FR/EN)
        var currentLang;
        (function () {
          var languageToggle = document.getElementById('languageToggle');
          var languageMenu = document.getElementById('languageMenu');
          var langOptionFr = document.getElementById('langOptionFr');
          var langOptionEn = document.getElementById('langOptionEn');

          function getInitialLanguage() {
            try {
              var stored = localStorage.getItem('site-language');
              if (stored === 'fr' || stored === 'en') return stored;
            } catch (e) {}
            return 'fr';
          }

          function updateActiveLanguage(lang) {
            if (langOptionFr) langOptionFr.classList.toggle('is-active', lang === 'fr');
            if (langOptionEn) langOptionEn.classList.toggle('is-active', lang === 'en');
          }

          function toggleLanguageMenu() {
            if (!languageMenu) return;
            var isOpen = languageMenu.classList.contains('is-open');
            languageMenu.classList.toggle('is-open', !isOpen);
            if (languageToggle) languageToggle.setAttribute('aria-expanded', !isOpen ? 'true' : 'false');
          }

          function closeLanguageMenu() {
            if (!languageMenu) return;
            languageMenu.classList.remove('is-open');
            if (languageToggle) languageToggle.setAttribute('aria-expanded', 'false');
          }

          currentLang = getInitialLanguage();
          updateActiveLanguage(currentLang);
          applyTranslations(currentLang);

          if (languageToggle) {
            languageToggle.setAttribute('aria-label', translations[currentLang]['lang.change']);
            languageToggle.setAttribute('title', translations[currentLang]['lang.toggle']);
          }

          if (languageToggle) {
            languageToggle.addEventListener('click', function (e) {
              e.stopPropagation();
              toggleLanguageMenu();
            });
          }

          function selectLanguage(lang) {
            if (lang !== 'fr' && lang !== 'en') return;
            currentLang = lang;
            applyTranslations(lang);
            updateActiveLanguage(lang);
            closeLanguageMenu();

            var themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
              var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
              themeToggle.setAttribute('aria-label', isDark ? translations[lang]['theme.light'] : translations[lang]['theme.dark']);
              themeToggle.setAttribute('title', translations[lang]['theme.toggle']);
            }

            if (languageToggle) {
              languageToggle.setAttribute('aria-label', translations[lang]['lang.change']);
              languageToggle.setAttribute('title', translations[lang]['lang.toggle']);
            }
          }

          if (langOptionFr) {
            langOptionFr.addEventListener('click', function (e) { e.stopPropagation(); selectLanguage('fr'); });
          }
          if (langOptionEn) {
            langOptionEn.addEventListener('click', function (e) { e.stopPropagation(); selectLanguage('en'); });
          }

          document.addEventListener('click', function (e) {
            var wrapper = document.querySelector('.language-toggle-wrapper');
            if (wrapper && !wrapper.contains(e.target)) closeLanguageMenu();
          });

          document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && languageMenu && languageMenu.classList.contains('is-open')) {
              closeLanguageMenu();
              if (languageToggle) languageToggle.focus();
            }
          });
        })();

        function showToast(msg){
          if (!toast) return;
          toast.textContent = msg;
          toast.classList.add('show');
          window.clearTimeout(showToast._t);
          showToast._t = window.setTimeout(function(){ toast.classList.remove('show'); }, 1600);
        }

        function buildGmailComposeUrl(){
          var subject = (document.getElementById('subject') || {}).value || '';
          var name = (document.getElementById('name') || {}).value || '';
          var from = (document.getElementById('from') || {}).value || '';
          var message = (document.getElementById('message') || {}).value || '';

          var bodyLines = [];
          if (name) bodyLines.push('Nom: ' + name);
          if (from) bodyLines.push('Email: ' + from);
          if (bodyLines.length) bodyLines.push('');
          if (message) bodyLines.push(message);
          var body = bodyLines.join('\n');

          return 'https://mail.google.com/mail/?view=cm&fs=1'
            + '&to=' + encodeURIComponent(to)
            + '&su=' + encodeURIComponent(subject)
            + '&body=' + encodeURIComponent(body);
        }

        if (form) {
          form.addEventListener('submit', function(e){
            e.preventDefault();
            window.open(buildGmailComposeUrl(), '_blank', 'noopener');
          });
        }

        if (copyBtn) {
          copyBtn.addEventListener('click', function(){
            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText(to).then(function(){
                showToast(translations[currentLang] ? translations[currentLang]['toast.copied'] : 'Email copié');
              }).catch(function(){
                showToast(translations[currentLang] ? translations[currentLang]['toast.copyFail'] : 'Impossible de copier');
              });
              return;
            }
            showToast(translations[currentLang] ? translations[currentLang]['toast.noClipboard'] : 'Copie non supportée');
          });
        }
      })();
    </script>
  </body>
</html>


